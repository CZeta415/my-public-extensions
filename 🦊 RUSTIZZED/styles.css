/* ===========================================================
   V12 - RUSTY RACCOON (CHAT RESTORED & ORANGE THEME)
   =========================================================== */

:root {
    --rust-bg: #101010 !important;
    --rust-panel: #1a1a1a !important;
    --rust-input: #000000 !important;
    --rust-orange: #ff5722 !important;     /* Naranja Óxido */
    --rust-neon: #ff9100 !important;       /* Naranja Neón (Texto/Bordes) */
    --rust-text-main: #e0e0e0 !important;
}

/* 1. RESET GLOBAL Y PERFORMANCE GRAFICA */
body, html, main {
    background-color: var(--rust-bg) !important;
    color: var(--rust-text-main) !important;
    font-family: 'Consolas', monospace !important;
    text-rendering: optimizeSpeed !important; /* Priorizar velocidad sobre letras bonitas */
}

/* Matar animaciones globales para que se sienta instantáneo */
* {
    transition: none !important;
    animation: none !important;
    box-shadow: none !important;
    backdrop-filter: none !important; /* ESTO causa lag al hacer scroll/escribir */
}

/* Ocultar elementos inútiles */
a[href="#main"], .visually-hidden, mat-sidenav[position="end"] {
    display: none !important;
}

/* ===========================================================
   2. EL INPUT (ESCRIBIR SUPER RÁPIDO)
   =========================================================== */

/* Footer sólido y sin transparencias para evitar recalculos de GPU */
footer, .turn-input-container, .input-area-wrapper {
    background-color: var(--rust-panel) !important;
    border-top: 2px solid var(--rust-neon) !important;
    opacity: 1 !important;
}

textarea {
    background-color: var(--rust-input) !important;
    color: var(--rust-neon) !important;
    caret-color: #fff !important;
    font-family: 'Consolas', monospace !important;
    font-size: 15px !important;
    border: 1px solid #333 !important;
    border-left: 5px solid var(--rust-orange) !important;
    
    /* TRUCOS ANTI-LAG PARA TEXTAREA */
    resize: none !important; /* Resize causa 'reflow' masivo */
    will-change: contents; /* Avisar al navegador */
}

/* Iconos de botones (Enviar/Adjuntar) más visibles */
button mat-icon {
    color: var(--rust-neon) !important;
    opacity: 1 !important;
}

/* ===========================================================
   3. VISUALIZACIÓN DEL CHAT (ZORRO STYLE)
   =========================================================== */

/* Bloques Generales: Aseguramos visibilidad y quitamos lag gráfico */
ms-chat-bubble, .turn-container {
    opacity: 1 !important;
    visibility: visible !important;
    display: block !important;
    margin-bottom: 20px !important;
    border: none !important;
    contain: layout style !important; /* Optimización segura (no strict) */
}

/* USUARIO: Estilo Naranja Marcado */
[data-role="user"], .user-turn {
    background: #191919 !important;
    border-left: 4px solid var(--rust-neon) !important;
    padding: 10px 15px !important;
    border-radius: 0 10px 10px 0 !important;
}

/* IA: Estilo Gris/Sutil */
[data-role="model"], .model-turn {
    background: transparent !important;
    border-left: 2px solid #444 !important;
    padding: 10px !important;
}

/* CÓDIGO */
.code-block, pre, code {
    background: #080808 !important;
    border: 1px solid #333 !important;
    color: #aebecd !important; /* Azul grisáceo legible */
}
.code-header {
    background: #222 !important;
    border-bottom: 1px solid var(--rust-orange) !important;
}

/* HUD DEL ZORRO */
#racco-hud {
    position: fixed;
    top: 0; left: 50%;
    transform: translateX(-50%);
    background: #000;
    border: 2px solid var(--rust-neon);
    border-top: none;
    border-radius: 0 0 10px 10px;
    z-index: 999999;
    padding: 5px 20px;
    display: flex;
    gap: 15px;
    align-items: center;
}
.racco-title { 
    color: var(--rust-neon); 
    font-weight: bold; 
    font-size: 14px; 
    text-transform: uppercase; 
}
.racco-btn {
    background: #222;
    border: 1px solid #555;
    color: white;
    padding: 4px 10px;
    cursor: pointer;
    font-size: 11px;
    transition: none;
}
.racco-btn:hover { background: var(--rust-orange); color: black; }